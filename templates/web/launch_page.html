{% extends "web/base.html" %}
{% load staticfiles %}
{% load user_agents %}
{% load embed_video_tags %}
{% load tz %}
{% block extrahead %}
<meta property="fb:app_id" content="746774215504127"/>
<meta property="og:title" content="{{ launch.rocket.configuration.name }} - {{ launch.mission.name }}"/>
<meta property="og:type" content="website"/>
<meta property="og:description" content="{{ launch.mission.description }}"/>
<meta property="og:url" content="https://spacelaunchnow.me/launch/{{ launch.slug }}/"/>
{% if launch.rocket.configuration.image_url %}
<meta property="og:image" content="{{ launch.rocket.configuration.image_url.url }}"/>
{% else %}
<meta property="og:image" content="https://spacelaunchnow.me/static/img/header.jpg"/>
<meta property="og:image:width" content="3000"/>
<meta property="og:image:height" content="2000"/>
{% endif %}

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-9824528399164059",
            enable_page_level_ads: true
        });
</script>
{% endblock %}

{% block navigation %}
<!-- Navigation -->
<nav class="navbar navbar-transparent navbar-color-on-scroll bg-primary fixed-top navbar-expand-lg">
    <div class="container">
        <div class="navbar-translate">
            <a class="navbar-brand" href="#page-top"><b>Space Launch Now</b></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false"
                    aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                <span class="navbar-toggler-icon"></span>
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
        <div class="collapse navbar-collapse">

            <ul class="navbar-nav ml-auto">

                <li class="nav-item">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="/next">Next</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/launch">Launches</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/3.2.0">API</a>
                </li>
                 <li class="nav-item">
                    <a class="nav-link" href="https://play.google.com/store/apps/details?id=me.calebjones.spacelaunchnow&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"><i
                            class="fab fa-android"></i> Android</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://itunes.apple.com/us/app/space-launch-now/id1399715731"><i
                            class="fab fa-apple"></i> iOS</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
{% endblock %}

{% block content %}
{% if launch.rocket.configuration.image_url %}
<div class="page-header header-filter" data-parallax="true"
     style="background-image: url({{ launch.rocket.configuration.image_url.url }});">
    {% else %}
    <div class="page-header header-filter" data-parallax="true"
         style="background-image: url('{% static 'img/header.jpg'%}');">
        {% endif %}
        <div class="container">
            <div class="row">
                <div class="col-lg-10 ml-auto mr-auto text-center">
                    <h1 class="title text-white">{{ launch.name }}</h1>
                    <h2 class="text-white" style="margin: 5px;">{{ status }}</h2>
                    {% if launch.failreason %}
                    <span class="badge badge-pill badge-danger">{{ launch.failreason }}</span>
                    {% endif %}
                    {% if launch.holdreason %}
                    <span class="badge badge-pill badge-warning">{{ launch.holdreason }}</span>
                    {% endif %}
                    <hr class="col-lg-8" style="background-color: white">
                    <h2 class="title text-white" style="margin: 5px;" id="countdown">L - -- : -- : -- : --</h2>
                    <h3 class="text-white" style="margin: -5px;" id="date">{{ launch.net }}</h3>
                    <br>
                    <a style="margin: 5px"
                       href='https://play.google.com/store/apps/details?id=me.calebjones.spacelaunchnow&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1'>
                        <img alt='Get it on Google Play' src="{% static 'img/button/google.png'%}" width="135" height="40"
                             alt="">
                    </a>
                    <a style="margin: 5px"
                       href='https://itunes.apple.com/us/app/space-launch-now/id1399715731'>
                        <img alt='Get it on App Store' src="{% static 'img/button/apple.png'%}" width="135" height="40" alt="">
                    </a>
                    <hr class="col-lg-8" style="background-color: white">
                    <span class="badge badge-pill badge-success">{{ launch.mission.orbit.name }}</span>
                    {% if launch.pad %}
                    <span class="badge badge-pill badge-primary">{{ launch.pad.name }}</span>
                    {% endif %}
                    {% if launch.pad.location.name %}
                    <span class="badge badge-pill badge-primary">{{ launch.pad.location.name }}</span>
                    {% endif %}
                    {% if launch.probability > 0 %}
                    <span class="badge badge-pill badge-primary">Probability: {{ launch.probability }}%</span>
                    {% endif %}
                    {% if launch.hashtag %}
                    <span class="badge badge-pill badge-info">{{ launch.hashtag }}</span>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col-lg-10 ml-auto mr-auto mx-auto text-center">
    <div class="container">
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- Space Launch Now -->
        <ins class="adsbygoogle"
             style="display:block; margin-top:50px; margin-bottom:50px;"
             data-ad-client="ca-pub-9824528399164059"
             data-ad-slot="8772606898"
             data-ad-format="auto"></ins>
        <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
</div>
<!-- Page Content -->
<div class="col-lg-10 ml-auto mr-auto mx-auto text-center">
    <div class="main card text-center">
        <div class="row ">
            <!-- Post Content Column -->
            <div class="col-lg-12 text-center">
                <div class="card-header card-header-danger text-center">
                    {% if launch.mission %}
                    <h1 class="title text-white">{{ launch.rocket.configuration.launch_agency.name }}</h1>
                    <h2 class="subheading text-white">{{ launch.rocket.configuration.name }}</h2>
                    {% else %}
                    <h1 class="title text-white">{{ launch.name }}</h1>
                    <h2 class="subheading text-white">{{ launch.rocket.configuration.name }}</h2>
                    {% endif %}

                </div>
            </div>
        </div>
        <div class="row" style="margin: 50px;">
            <div class="col-md-12 ml-auto mx-auto mr-auto text-center">
                <div class="profile">
                    <div class="avatar">
                        {% if agency.logo_url %}
                        <img src="{{ agency.logo_url.url }}"
                             alt="Circle Image"
                             class="img-fluid mx-auto"
                             style="max-width: 75%;max-height: 400px;">
                        {% else %}
                        <h1 class="title text-center"
                            style="margin-left: 100px; margin-right:100px;">{{ launch.rocket.configuration.launch_agency.name }}</h1>
                        <h2 class="subheading text-center">({{ launch.rocket.configuration.launch_agency.abbrev }})</h2>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <row>
            <div class="col-md-8 ml-auto mx-auto mr-auto text-center">
                {% if agency.administrator %}
                <span class="badge badge-pill badge-primary">{{ agency.administrator }}</span>
                {% endif %}
                {% if agency.founding_year %}
                <span class="badge badge-pill badge-warning">Founded: {{ agency.founding_year }}</span>
                {% endif %}
                <span class="badge badge-pill badge-info">Successes: {{ launches.good|length }}</span>
                <span class="badge badge-pill badge-danger">Failures: {{ launches.bad|length }}</span>
                <span class="badge badge-pill badge-default">Pending: {{ launches.pending|length }}</span>
                <br>
                <br>
                {% if agency.description %}
                <p>{{ agency.description }}</p>
                {% endif %}
                {% if launch.rocket.configuration.launch_agency.info_url %}
                <a class="btn btn-primary btn-lg" href="{{ launch.rocket.configuration.launch_agency.info_url }}">INFO</a>
                {% endif %}
                {% if launch.rocket.configuration.launch_agency.wiki_url %}
                <a class="btn btn-danger btn-lg" href="{{ launch.rocket.configuration.launch_agency.wiki_url }}">WIKI</a>
                {% endif %}
            </div>
        </row>
        <div class="row">
            <!-- Post Content Column -->
            <div class="col-md-4">
                <div class="info">
                    <!-- Date/Time -->
                    <h3 class="card-title">Launch Vehicle</h3>
                    <hr>
                    {% with launcher_config=launch.rocket.configuration %}
                    <h4 class="mbt-2">{{ launcher_config.name }}</h4>
                    <h6 class="mbt-2">
                        Configuration: {{ launcher_config.variant }}<br>
                        Family: {{ launcher_config.family }}</h6>
                    <p> {{ launcher_config.description}}</p>

                    <p>
                        <button class="btn btn-primary btn-link" type="button" data-toggle="collapse"
                                data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                            Specifications
                        </button>
                    </p>
                    <div class="collapse" id="collapseExample">
                        <div class="card">
                            <div class="card-header card-header-danger"> {{ launcher_config.full_name }}
                            </div>
                            GTO: {{ launcher_config.gto_capacity }}<br>
                            LEO: {{ launcher_config.leo_capacity }}<br>
                            Length: {{ launcher_config.length }} m<br>
                            Diameter: {{ launcher_config.diameter }} m<br>
                            Launch Mass: {{ launcher_config.launch_mass }}k kg<br>
                            Thurst: {{ launcher_config.to_thrust }} kN<br>
                        </div>
                    </div>
                    {% if launcher_config.info_url %}
                    <a class="btn btn-primary btn-lg" href="{{ launcher_config.info_url }}">INFO</a>
                    {% endif %}
                    {% if launcher_config.wiki_url %}
                    <a class="btn btn-danger btn-lg" href="{{ launcher_config.wiki_url }}">WIKI</a>
                    {% endif %}
                    {% endwith %}
                </div>
            </div>
            {% if launch.mission %}
            <div class="col-md-4">
                <div class="info">
                    <!-- Date/Time -->
                    <h3 class="card-title">{{ launch.mission.type_name }}</h3>
                    <hr>
                    <p>{{ launch.mission.description }}</p>
                </div>
            </div>
            {% endif %}
            <div class="col-md-4">
                <div class="info">
                    <!-- Date/Time -->
                    <h3 class="card-title">Launch Window</h3>
                    <hr>
                    <p>NET: {{ launch.net|date:"F jS Y - H:i T" }}</p>

                    <p>Open: {{ launch.window_start|date:"F jS Y - H:i T" }}</p>

                    <p>Close: {{ launch.window_end|date:"F jS Y - H:i T" }}</p>
                </div>
            </div>
        </div>
        <div class="row text-center">
            <div class="container">
                <div class="col-lg-12">
                    <h3 class="text-center card-title"><b>Watch the Launch</b></h3>
                    <hr>
                    <!-- Title -->
                    {% if youtube_urls|length > 0 %}
                    {% for url in youtube_urls %}
                    {% video url as my_video %}
                    <div class="videoWrapper">
                        {% if request|is_mobile %}
                        {% video my_video '85% x 25%' %}
                        {% else %}
                        {% video my_video '100% x 100%' %}
                        {% endif %}
                    </div>
                    <br>
                    {% endvideo %}
                    {% endfor %}
                    {% else %}
                    <p>Check back later for live embedded streams.</p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="row text-center">
            <div class="container">
                <h3 class="text-center card-title"><b>{{ launch.pad.location.name }}</b></h3>
                <h4 class="text-center">{{ launch.pad.name }}</h4>
                <hr>
                <div class="col-lg-12">
                    <iframe
                            width="100%"
                            height="400"
                            frameborder="0" style="border:0"
                            src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBkjvMIaP-KQrHWJ_aFndxsNS7KbDPu9Zw
    &q={{ launch.pad.location.name }}&zoom=10" allowfullscreen>

                    </iframe>
                </div>
            </div>
        </div>
        <div class="row text-center">
            <div class="container">
                <div class="col-lg-12">
                    <h3 class="mt-4 card-title">Links</h3>
                    <hr>
                    <h4>Videos</h4>
                    {% if launch.vid_urls.all|length > 0 %}
                    {% for url in launch.vid_urls.all %}
                    <a href="{{ url.vid_url }}">{{ url.vid_url }}</a><br>

                    {% endfor %}
                    {% else %}
                    <p>No videos available for this launch!</p>
                    {% endif %}
                    <h4>Information</h4>
                    {% if launch.vid_urls.all|length > 0 %}
                    {% for i_url in launch.info_urls.all %}
                    <a href="{{ i_url.info_url }}">{{ i_url.info_url }}</a><br>
                    {% endfor %}
                    {% else %}
                    <p>No information links available for this launch!</p>
                    {% endif %}
                    <hr>
                    <h5>Help <a href="https://launchlibrary.net/about.html">Launch Library</a> keep this launch up
                        to date!</h5>
                    <br>
                </div>
            </div>
        </div>

    </div>
</div>
<!-- /.row -->

<div class="container">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- Space Launch Now -->
    <ins class="adsbygoogle"
         style="display:block; margin-top:50px; margin-bottom:50px;"
         data-ad-client="ca-pub-9824528399164059"
         data-ad-slot="8772606898"
         data-ad-format="auto"></ins>
    <script>
                (adsbygoogle = window.adsbygoogle || []).push({});








    </script>
</div>
<script src="{% static 'material_kit/js/dateFormat.js' %}" type="text/javascript"></script>
<script>
        var countDownDate = new Date("{{launch.net.isoformat}}");

        document.getElementById("date").innerHTML = dateFormat(countDownDate, "mmmm dS, yyyy - h:MM TT Z");
        // Set the date we're counting down to

        var now = new Date().getTime();
        var distance = countDownDate.getTime() - now;
        if (distance > 0) {
            // Update the count down every 1 second
            var x = setInterval(function () {

                // Get todays date and time
                var now = new Date().getTime();

                // Find the distance between now an the count down date
                var distance = countDownDate.getTime() - now;

                // Time calculations for days, hours, minutes and seconds
                var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                if (days <= 9) {
                    days = "0" + days
                }
                if (hours <= 9) {
                    hours = "0" + hours
                }
                if (minutes <= 9) {
                    minutes = "0" + minutes
                }
                if (seconds <= 9) {
                    seconds = "0" + seconds
                }
                // Display the result in the element with id="demo"
                document.getElementById("countdown").innerHTML = "L - " + days + " : " + hours + " : "
                    + minutes + " : " + seconds;

                // If the count down is finished, write some text
                if (distance < 0) {
                    clearInterval(x);
                    document.getElementById("countdown").innerHTML = "L - 00 : 00 : 00 : 00";
                }
            }, 1000);
        } else {
            document.getElementById("countdown").innerHTML = "L - 00 : 00 : 00 : 00";
        }
</script>
{% include "web/install_buttons.html" %}
{% endblock %}

